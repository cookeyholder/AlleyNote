# 更新日誌

本專案遵循 [語意化版本](https://semver.org/lang/zh-TW/) 規範。

## [2.0.0] - 2025-10-13

### 重大變更

**🎉 主要里程碑**
- ✅ **統計分析系統**：完整實作多維度統計功能（7 個 API 端點）
- ✅ **密碼安全強化**：實作強制密碼強度驗證（10,000+ 黑名單）
- ✅ **PHP 8.4.13 升級**：完整支援最新 PHP 特性
- ✅ **測試覆蓋率達標**：2,225 個測試，9,255 個斷言全部通過
- ✅ **PHPStan Level 10**：零錯誤通過最高級別靜態分析

### 新增功能

**📊 統計分析系統（100% 完成）**
- 新增 7 個統計 API 端點：
  - `GET /api/v1/statistics/overview` - 統計概覽
  - `GET /api/v1/statistics/posts` - 文章統計
  - `GET /api/v1/statistics/sources` - 來源分布統計
  - `GET /api/v1/statistics/users` - 使用者統計
  - `GET /api/v1/statistics/popular` - 熱門內容排行
  - `GET /api/v1/statistics/charts/views/timeseries` - 流量時間序列
  - `GET /api/v1/activity-logs/login-failures` - 登入失敗統計
- 實作統計儀表板（前端視覺化）
- 建立 41 個資料庫索引（查詢效能 < 1ms）
- 實作快取機制（TTL 5分鐘，命中率 70-80%）
- 支援多種時間範圍（今日/本週/本月/自訂）
- 圖表視覺化（Chart.js 整合）

**🔑 密碼安全強化（100% 完成）**
- 實作 8 項密碼驗證規則：
  - 最小長度 8 字元
  - 必須包含大小寫字母
  - 必須包含數字
  - 不能包含連續字母（abc, xyz）
  - 不能全部相同字元（aaa, 111）
  - 不能是常見弱密碼（10,000+ 黑名單）
  - 不能包含使用者名稱或 email
  - 建議包含特殊符號
- 新增密碼驗證 API：`POST /api/auth/validate-password`
- 實作前端密碼強度指示器
- 實作安全密碼生成器
- 即時密碼強度評分與建議

**🏷️ 標籤系統優化**
- 實作文章標籤管理功能
- 自動更新標籤使用計數
- 標籤搜尋與篩選
- 標籤批次操作

**⚙️ 系統改進**
- 完整的使用者活動記錄系統
- IP 黑白名單管理
- HTTP Security Headers 設定
- CSRF Token 防護強化

### 變更

**📝 文件大更新**
- 重構 README.md（完整對應專案現況）
- 更新 QUICK_START.md（5 分鐘快速啟動）
- 新增 CHANGELOG.md（詳細版本記錄）
- 整理 docs/ 目錄結構：
  - 移除臨時開發文件
  - 歸檔已完成專案文件
  - 建立清晰的文件索引

**🏗️ 架構優化**
- 統一 Docker Compose 指令格式（`docker-compose` → `docker compose`）
- 優化資料庫查詢效能
- 改善快取策略
- 強化錯誤處理機制

**🧪 測試改進**
- 新增 600+ 個測試案例
- 提升測試覆蓋率至 95%+
- 改善測試穩定性
- 新增 E2E 測試（統計頁面、密碼安全）

### 修復

**🐛 錯誤修復**
- 修正統計 API 的日期範圍處理
- 修正密碼驗證的邊界條件
- 修正前端 token 刷新機制
- 修正檔案上傳權限問題
- 修正標籤計數不同步問題

**🔒 安全性修復**
- 修正 CSRF 防護機制
- 修正 XSS 漏洞
- 修正 SQL 注入風險
- 強化 JWT Token 驗證

### 效能優化

- 資料庫查詢平均時間從 10ms 降至 < 1ms（900%+ 提升）
- 統計 API 回應時間 < 500ms
- 頁面載入時間 < 2 秒
- 實作應用層快取（統計資料）

### 技術債務清理

- 移除 500+ 行廢棄程式碼
- 整理 docs/ 目錄（歸檔臨時文件）
- 統一程式碼風格（PHP CS Fixer）
- 提升型別安全（PHPStan Level 10）

---

## [1.0.0] - 2025-04-14

### 新增

**核心功能**
- 完整的使用者認證系統（註冊、登入、登出）
- 文章管理系統（CRUD 操作）
- 附件管理系統（上傳、下載、刪除）
- 權限控制系統（角色與權限）
- IP 控制系統（黑白名單）

**部署工具**
- Docker 容器化支援
- 完整的部署文件（DEPLOYMENT.md）
- 自動化部署腳本（deploy.sh）
- 系統回滾腳本（rollback.sh）
- 資料庫備份與還原腳本
- 檔案系統備份與還原腳本
- 系統監控設定

**測試與 CI/CD**
- 完整的測試套件（1,500+ 測試）
- 自動化測試流程
- CI/CD 設定（GitHub Actions）
- 程式碼品質檢查（PHPStan, PHP CS Fixer）

### 安全性

- JWT Token 身份驗證
- CSRF 防護
- XSS 防護
- SQL 注入防護
- 檔案上傳安全檢查
- IP 黑白名單機制
- 速率限制

---

## [0.1.0] - 2025-04-11

### 新增

- 初始專案結構（DDD 架構）
- 基本測試環境
- 資料庫遷移功能
- Docker 開發環境
- 基本的 API 端點
- 簡單的前端界面

---

## 版本說明

### 版本號規則

遵循語意化版本規範：`主版本.次版本.修訂號`

- **主版本**：不相容的 API 變更
- **次版本**：向下相容的功能新增
- **修訂號**：向下相容的問題修正

### 變更類型

- **新增**：新功能
- **變更**：既有功能的變更
- **棄用**：即將移除的功能
- **移除**：已移除的功能
- **修復**：錯誤修正
- **安全性**：安全性相關修正

---

## 未來計劃

### v2.1.0（計劃中）

**新功能**
- 即時通知系統（WebSocket）
- 多語言支援（i18n）
- 主題切換（深色模式）
- 進階搜尋功能

**優化**
- Redis 快取層
- 圖片壓縮與 CDN
- API 效能優化
- 前端效能優化

### v3.0.0（未來）

**重大功能**
- 行動版 APP
- 社交功能（留言、點讚）
- 工作流程引擎
- AI 內容推薦

---

**完整變更歷史**: [GitHub Releases](https://github.com/cookeyholder/AlleyNote/releases)
