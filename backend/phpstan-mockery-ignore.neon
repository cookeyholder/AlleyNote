# PHPStan Mockery 忽略設定
# 這些規則專門用於處理測試框架中無法避免的型別檢查問題

parameters:
    ignoreErrors:
        # 1. Mockery shouldReceive 方法調用
        # 理由: Mockery 動態建立 mock 物件，PHPStan 無法識別動態新增的方法
        - '/Call to an undefined method.*::shouldReceive\(\)/'
        - '/Call to an undefined method.*::shouldNotReceive\(\)/'

        # 2. Mock 物件參數型別不符
        # 理由: Mock 物件實現了介面但 PHPStan 認為型別不相容
        - '/Parameter .* expects .*, Mockery\\.*Interface.* given/'
        - '/Call to method .* expects .*, Mockery\\.*Interface.* given/'
        - '/accepts .* but .* Mockery\\MockInterface.* given/'

        # 3. 測試中的陣列型別註解不完整
        # 理由: 測試資料通常使用簡單陣列，不需要複雜的型別註解
        - '/type has no value type specified in iterable type array/'
        - '/has parameter .* with no value type specified in iterable type array/'
        - '/return type has no value type specified in iterable type array/'

    # 關閉未匹配錯誤模式的警告，避免干擾開發流程
    reportUnmatchedIgnoredErrors: false
