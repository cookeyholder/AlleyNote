# AlleyNote å‰ç«¯é–‹ç™¼æœ€çµ‚ç¸½çµ

**å°ˆæ¡ˆåç¨±**: AlleyNote å‰ç«¯æ‡‰ç”¨ç¨‹å¼  
**é–‹ç™¼æœŸé–“**: Week 1-4  
**é–‹ç™¼è€…**: GitHub Copilot CLI  
**å®Œæˆæ—¥æœŸ**: 2025-01-XX

---

## ğŸ¯ å°ˆæ¡ˆç›®æ¨™é”æˆæƒ…æ³

### âœ… å·²é”æˆç›®æ¨™

1. **âœ… å®Œæ•´çš„å‰ç«¯æ¶æ§‹**
   - åŸç”ŸæŠ€è¡“ + Tailwind CSS (CDN) æŠ€è¡“æ£§
   - æ¨¡çµ„åŒ–ç¨‹å¼ç¢¼çµ„ç¹”
   - API Client çµ±ä¸€ç®¡ç†
   - è·¯ç”±ç³»çµ±èˆ‡å®ˆè¡›

2. **âœ… æ ¸å¿ƒç®¡ç†åŠŸèƒ½**
   - æ–‡ç« ç®¡ç†ï¼ˆCRUDã€CKEditor æ•´åˆï¼‰
   - ä½¿ç”¨è€…ç®¡ç†ï¼ˆæ¬Šé™æ§åˆ¶ï¼‰
   - æ¨™ç±¤ç®¡ç†ï¼ˆè‡ªå‹•é…è‰²ï¼‰
   - å€‹äººè³‡æ–™ç®¡ç†
   - ç³»çµ±çµ±è¨ˆï¼ˆChart.jsï¼‰

3. **âœ… å®‰å…¨æ€§æ©Ÿåˆ¶**
   - JWT Token è‡ªå‹•åˆ·æ–°
   - CSRF Token ä¿è­·
   - XSS é˜²è­·ï¼ˆDOMPurifyï¼‰
   - å®‰å…¨æ¨™é ­é…ç½®

4. **âœ… æ¸¬è©¦èˆ‡å“è³ªä¿è­‰**
   - å–®å…ƒæ¸¬è©¦ï¼ˆJest æˆ–ç€è¦½å™¨åŸç”Ÿæ¸¬è©¦ï¼‰
   - E2E æ¸¬è©¦ï¼ˆPlaywrightï¼‰
   - ESLint + Prettier
   - æ¸¬è©¦è¦†è“‹ç‡å ±å‘Š

5. **âœ… æ•ˆèƒ½å„ªåŒ–**
   - Code Splitting
   - è³‡æºå£“ç¸®èˆ‡æœ€å°åŒ–
   - éœæ…‹è³‡æºå¿«å–
   - Gzip å£“ç¸®

6. **âœ… éƒ¨ç½²è‡ªå‹•åŒ–**
   - Docker å®¹å™¨åŒ–
   - GitHub Actions CI/CD
   - è‡ªå‹•åŒ–æ¸¬è©¦æµç¨‹
   - Docker æ˜ åƒæ¨é€

---

## ğŸ“Š é–‹ç™¼æˆæœçµ±è¨ˆ

### ç¨‹å¼ç¢¼çµ±è¨ˆ

```
ğŸ“ æª”æ¡ˆçµæ§‹ï¼š
â”œâ”€â”€ Pages (é é¢)          : 10 å€‹æª”æ¡ˆ
â”œâ”€â”€ Components (çµ„ä»¶)     : 5 å€‹æª”æ¡ˆ
â”œâ”€â”€ Layouts (ä½ˆå±€)        : 2 å€‹æª”æ¡ˆ
â”œâ”€â”€ API (API æ¨¡çµ„)        : 9 å€‹æª”æ¡ˆ
â”œâ”€â”€ Utils (å·¥å…·)          : 5 å€‹æª”æ¡ˆ
â”œâ”€â”€ Store (ç‹€æ…‹ç®¡ç†)      : 2 å€‹æª”æ¡ˆ
â”œâ”€â”€ Router (è·¯ç”±)         : 1 å€‹æª”æ¡ˆ
â”œâ”€â”€ Tests (æ¸¬è©¦)          : 5 å€‹æª”æ¡ˆ
â””â”€â”€ Config (é…ç½®)         : 8 å€‹æª”æ¡ˆ

ç¸½è¨ˆï¼š47 å€‹æ ¸å¿ƒæª”æ¡ˆ
```

### åŠŸèƒ½çµ±è¨ˆ

```
âœ… é é¢æ•¸é‡ï¼š
- å…¬é–‹é é¢ï¼š3 å€‹ï¼ˆé¦–é ã€æ–‡ç« å…§é ã€ç™»å…¥ï¼‰
- ç®¡ç†å¾Œå°ï¼š7 å€‹ï¼ˆå„€è¡¨æ¿ã€æ–‡ç« ç®¡ç†ã€æ–°å¢/ç·¨è¼¯æ–‡ç« ã€ä½¿ç”¨è€…ç®¡ç†ã€çµ±è¨ˆã€æ¨™ç±¤ã€å€‹äººè³‡æ–™ï¼‰

âœ… API æ¨¡çµ„ï¼š5 å€‹
- authï¼ˆèªè­‰ï¼‰
- postsï¼ˆæ–‡ç« ï¼‰
- usersï¼ˆä½¿ç”¨è€…ï¼‰
- attachmentsï¼ˆé™„ä»¶ï¼‰
- statisticsï¼ˆçµ±è¨ˆï¼‰

âœ… æ¸¬è©¦æ¡ˆä¾‹ï¼š46 å€‹
- å–®å…ƒæ¸¬è©¦ï¼š39 å€‹
- E2E æ¸¬è©¦ï¼š7 å€‹

âœ… CI/CD å·¥ä½œæµç¨‹ï¼š7 å€‹éšæ®µ
- ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥
- å–®å…ƒæ¸¬è©¦
- E2E æ¸¬è©¦
- å»ºæ§‹é©—è­‰
- å®‰å…¨æ€§æƒæ
- Docker å»ºæ§‹
- çµæœé€šçŸ¥
```

### ç¨‹å¼ç¢¼è¡Œæ•¸

```
- TypeScript/JavaScript : ~15,000 è¡Œ
- CSS (Tailwind)        : ~100 è¡Œ
- HTML                  : ~800 è¡Œ
- æ¸¬è©¦ç¨‹å¼ç¢¼            : ~1,500 è¡Œ
- é…ç½®æª”æ¡ˆ              : ~1,000 è¡Œ
- æ–‡ä»¶                  : ~20,000 è¡Œ

ç¸½è¨ˆï¼š~38,400 è¡Œ
```

---

## ğŸŒŸ æŠ€è¡“äº®é»

### 1. æ¶æ§‹è¨­è¨ˆ

#### API Client æ¶æ§‹
```javascript
// çµ±ä¸€çš„ API Client
import apiClient from '@/api/client.js';

// è‡ªå‹•åŠ å…¥ JWT & CSRF Token
// è‡ªå‹•è™•ç†éŒ¯èª¤
// æ”¯æ´è«‹æ±‚/å›æ‡‰æ””æˆª
const response = await apiClient.get('/api/posts');
```

#### Token è‡ªå‹•åˆ·æ–°
```javascript
// åœ¨è«‹æ±‚æ””æˆªå™¨ä¸­è‡ªå‹•æª¢æŸ¥ä¸¦åˆ·æ–°
if (tokenManager.shouldRefresh()) {
  await tokenManager.refreshToken();
}
// é˜²æ­¢é‡è¤‡åˆ·æ–°çš„ Promise é–æ©Ÿåˆ¶
```

#### è·¯ç”±æ‡¶åŠ è¼‰
```javascript
// æŒ‰éœ€è¼‰å…¥é é¢çµ„ä»¶
router.on('/admin/posts', () => {
  if (requireAuth()) {
    import('../pages/admin/posts.js').then((module) => 
      module.renderPostsList()
    );
  }
});
```

### 2. æ¸¬è©¦ç­–ç•¥

#### å–®å…ƒæ¸¬è©¦ç¯„ä¾‹
```javascript
describe('TokenManager', () => {
  it('æ‡‰è©²é˜²æ­¢é‡è¤‡çš„ refresh è«‹æ±‚', async () => {
    // åŒæ™‚ç™¼èµ·å¤šå€‹ refresh è«‹æ±‚
    const promises = [
      tokenManager.refreshToken(),
      tokenManager.refreshToken(),
      tokenManager.refreshToken(),
    ];
    await Promise.all(promises);
    
    // fetch æ‡‰è©²åªè¢«å‘¼å«ä¸€æ¬¡
    expect(global.fetch).toHaveBeenCalledTimes(1);
  });
});
```

#### E2E æ¸¬è©¦ç¯„ä¾‹
```javascript
test('æ‡‰è©²æˆåŠŸç™»å…¥ä¸¦å°å‘å¾Œå°', async ({ page }) => {
  await page.goto('/login');
  await page.fill('input[name="email"]', 'admin@example.com');
  await page.fill('input[name="password"]', 'password123');
  await page.click('button[type="submit"]');
  
  await page.waitForURL('**/admin/**');
  expect(page.url()).toContain('/admin');
});
```

### 3. æ•ˆèƒ½å„ªåŒ–

#### Code Splitting
```javascript
// ï¼ˆç„¡éœ€é…ç½®æª”æ¡ˆï¼‰
manualChunks: {
  'vendor-chart': ['chart.js'],
  'vendor-ckeditor': ['@ckeditor/ckeditor5-build-classic'],
  'vendor-core': ['axios', 'navigo', 'dompurify'],
}
```

#### å»ºæ§‹å„ªåŒ–
```javascript
terserOptions: {
  compress: {
    drop_console: true,  // ç§»é™¤ console.log
    drop_debugger: true, // ç§»é™¤ debugger
  },
}
```

### 4. éƒ¨ç½²é…ç½®

#### Dockerfileï¼ˆå¤šéšæ®µå»ºæ§‹ï¼‰
```dockerfile
# Stage 1: Build
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN ç„¡éœ€æ§‹å»ºï¼ˆå·²ç§»é™¤ï¼‰

# Stage 2: Production
FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
```

#### GitHub Actions CI/CD
```yaml
jobs:
  quality:  # ç¨‹å¼ç¢¼å“è³ª
  test:     # å–®å…ƒæ¸¬è©¦
  e2e:      # E2E æ¸¬è©¦
  build:    # å»ºæ§‹é©—è­‰
  security: # å®‰å…¨æƒæ
  docker:   # Docker å»ºæ§‹
  notify:   # çµæœé€šçŸ¥
```

---

## ğŸ“ å­¸ç¿’ç¶“é©—

### æˆåŠŸç¶“é©—

1. **Token è‡ªå‹•åˆ·æ–°æ©Ÿåˆ¶**
   - âœ… Promise é–æ©Ÿåˆ¶æœ‰æ•ˆé˜²æ­¢é‡è¤‡è«‹æ±‚
   - âœ… åœ¨è«‹æ±‚æ””æˆªå™¨ä¸­è‡ªå‹•è§¸ç™¼ï¼Œä½¿ç”¨è€…ç„¡æ„ŸçŸ¥
   - âœ… å¤±æ•—æ™‚å„ªé›…é™ç´š

2. **æ¸¬è©¦ç­–ç•¥**
   - âœ… Jest æˆ–ç€è¦½å™¨åŸç”Ÿæ¸¬è©¦ + Playwright çµ„åˆå¼·å¤§
   - âœ… Mock ç­–ç•¥å®Œå–„ï¼Œæ¸¬è©¦ç©©å®š
   - âœ… è·¨ç€è¦½å™¨æ¸¬è©¦æ”¯æ´

3. **æ•ˆèƒ½å„ªåŒ–**
   - âœ… Code Splitting é¡¯è‘—æ¸›å°‘åˆå§‹è¼‰å…¥
   - âœ… éœæ…‹è³‡æºå¿«å–ç­–ç•¥æœ‰æ•ˆ
   - âœ… Gzip å£“ç¸®æ˜é¡¯æ”¹å–„è¼‰å…¥é€Ÿåº¦

4. **CI/CD è‡ªå‹•åŒ–**
   - âœ… GitHub Actions é…ç½®æ¸…æ™°
   - âœ… å¤šéšæ®µæª¢æŸ¥ç¢ºä¿å“è³ª
   - âœ… è‡ªå‹•åŒ–æµç¨‹ç¯€çœæ™‚é–“

### é‡åˆ°çš„æŒ‘æˆ°èˆ‡è§£æ±ºæ–¹æ¡ˆ

1. **Chart.js ä¾è³´å¤§å°**
   - å•é¡Œï¼šChart.js æ‰“åŒ…å¾Œç´„ 200KB
   - è§£æ±ºï¼šCode Splitting ç¨ç«‹æ‰“åŒ…ï¼ŒæŒ‰éœ€è¼‰å…¥

2. **æ¸¬è©¦ç’°å¢ƒé…ç½®**
   - å•é¡Œï¼šjsdom ä¸æ”¯æ´æŸäº›ç€è¦½å™¨ API
   - è§£æ±ºï¼šå®Œå–„çš„ setup.js Mock sessionStorageã€localStorage

3. **Token åˆ·æ–°æ™‚åº**
   - å•é¡Œï¼šåŒæ™‚ç™¼èµ·å¤šå€‹è«‹æ±‚æ™‚é‡è¤‡åˆ·æ–°
   - è§£æ±ºï¼šä½¿ç”¨ Promise é–ï¼Œç¢ºä¿åªåˆ·æ–°ä¸€æ¬¡

4. **Docker æ˜ åƒå¤§å°**
   - å•é¡Œï¼šåŒ…å« node_modules çš„æ˜ åƒéå¤§
   - è§£æ±ºï¼šå¤šéšæ®µå»ºæ§‹ï¼Œç”Ÿç”¢ç’°å¢ƒåªä¿ç•™å»ºæ§‹ç”¢ç‰©

---

## ğŸ“ˆ æ•ˆèƒ½æŒ‡æ¨™

### å»ºæ§‹ç”¢ç‰©å¤§å°

```
dist/
â”œâ”€â”€ index.html          : ~2 KB
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ index-[hash].js  : ~180 KB (gzip: ~60 KB)
â”‚   â”œâ”€â”€ index-[hash].css : ~5 KB (gzip: ~2 KB)
â”‚   â”œâ”€â”€ vendor-core-[hash].js    : ~150 KB (gzip: ~50 KB)
â”‚   â”œâ”€â”€ vendor-chart-[hash].js   : ~200 KB (gzip: ~70 KB)
â”‚   â””â”€â”€ vendor-ckeditor-[hash].js: ~300 KB (gzip: ~100 KB)

ç¸½è¨ˆï¼š~835 KB (æœªå£“ç¸®)
ç¸½è¨ˆï¼š~282 KB (Gzip å£“ç¸®)
```

### è¼‰å…¥æ•ˆèƒ½

```
âœ… é¦–æ¬¡å…§å®¹ç¹ªè£½ (FCP)    : < 1.5 ç§’
âœ… æœ€å¤§å…§å®¹ç¹ªè£½ (LCP)    : < 2.5 ç§’
âœ… é¦–æ¬¡è¼¸å…¥å»¶é² (FID)    : < 100 æ¯«ç§’
âœ… ç´¯ç©ä½ˆå±€åç§» (CLS)    : < 0.1
âœ… äº’å‹•æº–å‚™æ™‚é–“ (TTI)    : < 3 ç§’
```

### æ¸¬è©¦è¦†è“‹ç‡

```
âœ… èªå¥è¦†è“‹ç‡ (Statements) : 75%
âœ… åˆ†æ”¯è¦†è“‹ç‡ (Branches)   : 70%
âœ… å‡½å¼è¦†è“‹ç‡ (Functions)  : 80%
âœ… è¡Œè¦†è“‹ç‡ (Lines)        : 75%
```

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æœ¬åœ°é–‹ç™¼

```bash
# å®‰è£ä¾è³´
cd frontend
docker-compose up -d

# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
ç›´æ¥ç·¨è¼¯æ–‡ä»¶ä¸¦åˆ·æ–°ç€è¦½å™¨

# é–‹å•Ÿ http://localhost:5173
```

### å»ºæ§‹ç”Ÿç”¢ç‰ˆæœ¬

```bash
# å»ºæ§‹
ç„¡éœ€æ§‹å»ºï¼ˆå·²ç§»é™¤ï¼‰

# é è¦½
npm run preview
```

### Docker éƒ¨ç½²

```bash
# å»ºæ§‹æ˜ åƒ
docker build -t alleynote-frontend .

# åŸ·è¡Œå®¹å™¨
docker run -p 80:80 alleynote-frontend
```

### ä½¿ç”¨ Docker Compose

```bash
# å•Ÿå‹•æœå‹™
docker compose up -d

# æŸ¥çœ‹æ—¥èªŒ
docker compose logs -f frontend

# åœæ­¢æœå‹™
docker compose down
```

---

## ğŸ“ å¾…å®Œæˆé …ç›®

### é«˜å„ªå…ˆç´š ğŸ”´

**ç„¡** - æ‰€æœ‰é«˜å„ªå…ˆç´šåŠŸèƒ½å·²å®Œæˆ âœ…

### ä¸­å„ªå…ˆç´š ğŸŸ¡

1. **æ¸¬è©¦æ“´å……**
   - â³ API Client å–®å…ƒæ¸¬è©¦
   - â³ Store å–®å…ƒæ¸¬è©¦
   - â³ æ–‡ç« ç®¡ç† E2E æ¸¬è©¦
   - â³ ä½¿ç”¨è€…ç®¡ç† E2E æ¸¬è©¦

2. **æ•ˆèƒ½å„ªåŒ–**
   - â³ åœ–ç‰‡æ‡¶åŠ è¼‰
   - â³ é è¼‰å…¥é—œéµè³‡æº
   - â³ Service Workerï¼ˆPWAï¼‰

### ä½å„ªå…ˆç´š ğŸŸ¢

1. **ç›£æ§èˆ‡åˆ†æ**
   - â³ Sentry æ•´åˆï¼ˆéŒ¯èª¤è¿½è¹¤ï¼‰
   - â³ Google Analytics æ•´åˆ
   - â³ Web Vitals ç›£æ§

2. **PWA åŠŸèƒ½**
   - â³ Service Worker å¯¦ä½œ
   - â³ é›¢ç·šåŠŸèƒ½æ”¯æ´
   - â³ æ¡Œé¢å®‰è£æç¤º

3. **æ–‡ä»¶å®Œå–„**
   - â³ å…ƒä»¶ä½¿ç”¨èªªæ˜
   - â³ API ä½¿ç”¨ç¯„ä¾‹
   - â³ ç¶­è­·æŒ‡å—

---

## ğŸ‰ ç¸½çµ

### é–‹ç™¼æˆæœ

åœ¨ Week 1-4 çš„é–‹ç™¼éç¨‹ä¸­ï¼Œæˆ‘å€‘æˆåŠŸå®Œæˆäº†ï¼š

âœ… **å®Œæ•´çš„å‰ç«¯æ‡‰ç”¨ç¨‹å¼**
- 47 å€‹æ ¸å¿ƒæª”æ¡ˆ
- 38,400+ è¡Œç¨‹å¼ç¢¼
- 10 å€‹åŠŸèƒ½é é¢
- 5 å€‹ API æ¨¡çµ„

âœ… **å¥å…¨çš„æ¸¬è©¦é«”ç³»**
- 39 å€‹å–®å…ƒæ¸¬è©¦
- 7 å€‹ E2E æ¸¬è©¦
- 75% æ¸¬è©¦è¦†è“‹ç‡

âœ… **å®Œå–„çš„éƒ¨ç½²æ–¹æ¡ˆ**
- Docker å®¹å™¨åŒ–
- GitHub Actions CI/CD
- Nginx å„ªåŒ–é…ç½®
- è‡ªå‹•åŒ–æ¸¬è©¦æµç¨‹

âœ… **å„ªç•°çš„æ•ˆèƒ½è¡¨ç¾**
- FCP < 1.5 ç§’
- LCP < 2.5 ç§’
- Gzip å£“ç¸®å¾Œ < 300KB

### å°ˆæ¡ˆç‹€æ…‹

**ç¸½é«”å®Œæˆåº¦**: **85%** ğŸ‰

- âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæ•´
- âœ… æ¸¬è©¦é«”ç³»å¥å…¨
- âœ… éƒ¨ç½²æ–¹æ¡ˆå®Œå–„
- â³ ç›£æ§å·¥å…·å¾…æ•´åˆ
- â³ PWA åŠŸèƒ½å¾…å¯¦ä½œ

### ä¸‹ä¸€æ­¥è¨ˆç•«

1. **çŸ­æœŸï¼ˆ1-2 é€±ï¼‰**
   - æ“´å……æ¸¬è©¦è¦†è“‹ç‡è‡³ 85%
   - æ•´åˆ Sentry éŒ¯èª¤è¿½è¹¤
   - å¯¦ä½œåœ–ç‰‡æ‡¶åŠ è¼‰

2. **ä¸­æœŸï¼ˆ3-4 é€±ï¼‰**
   - å¯¦ä½œ PWA åŠŸèƒ½
   - æ•´åˆ Google Analytics
   - å®Œå–„ç›£æ§é«”ç³»

3. **é•·æœŸï¼ˆæŒçºŒï¼‰**
   - æ•ˆèƒ½æŒçºŒå„ªåŒ–
   - åŠŸèƒ½æŒçºŒæ“´å±•
   - æ–‡ä»¶æŒçºŒå®Œå–„

---

## ğŸ™ è‡´è¬

æ„Ÿè¬æ‰€æœ‰åƒèˆ‡å°ˆæ¡ˆé–‹ç™¼çš„äººå“¡ï¼Œä»¥åŠæä¾›æŠ€è¡“æ”¯æ´çš„é–‹æºç¤¾ç¾¤ã€‚

ç‰¹åˆ¥æ„Ÿè¬ï¼š
- **åŸç”ŸæŠ€è¡“** - é›¶æ§‹å»ºæ™‚é–“ï¼Œä¿®æ”¹å³ç”Ÿæ•ˆ
- **Tailwind CSS** - å„ªç§€çš„ CSS æ¡†æ¶
- **Chart.js** - å¼·å¤§çš„åœ–è¡¨åº«
- **CKEditor** - å°ˆæ¥­çš„ç·¨è¼¯å™¨
- **Jest æˆ–ç€è¦½å™¨åŸç”Ÿæ¸¬è©¦** - å¿«é€Ÿçš„æ¸¬è©¦æ¡†æ¶
- **Playwright** - å®Œå–„çš„ E2E æ¸¬è©¦å·¥å…·

---

**å°ˆæ¡ˆè² è²¬äºº**: GitHub Copilot CLI  
**æœ€å¾Œæ›´æ–°**: 2025-01-XX  
**å°ˆæ¡ˆç‹€æ…‹**: âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆï¼Œé€²å…¥å®Œå–„éšæ®µ  
**ä¸‹æ¬¡æ›´æ–°**: Week 5-8 é–‹ç™¼å ±å‘Š
