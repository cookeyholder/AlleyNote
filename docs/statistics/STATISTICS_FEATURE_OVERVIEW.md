# AlleyNote 統計功能總覽

> 📊 **面向產品與營運的統計分析系統**
> 提供多維度數據洞察，支援業務決策與效能優化

**版本**: v1.2
**最後更新**: 2025-09-27
**適用版本**: AlleyNote v4.2+

---

## 🎯 功能概述

AlleyNote 統計模組是一個全面的數據分析系統，專為內容管理平台量身打造。透過多層次的數據收集、處理與展示，為管理者提供深入的業務洞察。

### 核心價值
- **📈 數據驅動決策**: 基於真實數據制定內容與用戶策略
- **⚡ 即時監控**: 掌握平台運營狀況與異常狀態
- **📊 趨勢預測**: 透過歷史數據預測未來發展趨勢
- **🎯 精準優化**: 識別熱門內容與活躍用戶，優化資源配置

---

## 📊 統計維度

### 1. 📝 內容統計

#### 文章分析
- **發布統計**: 每日/週/月新增文章數量
- **瀏覽分析**: 文章瀏覽量、點擊率、停留時間
- **互動數據**: 評論、分享、收藏等互動行為
- **分類統計**: 各分類文章分佈與受歡迎程度

#### 內容品質指標
- **內容熱度**: 基於瀏覽量與互動的綜合評分
- **生命週期**: 文章從發布到冷卻的時間軌跡
- **SEO 效能**: 搜索引擎導流情況
- **附件使用**: 檔案下載次數與類型分析

### 2. 👥 用戶統計

#### 用戶行為分析
- **活躍度指標**: DAU、WAU、MAU 統計
- **註冊轉化**: 新用戶註冊趨勢與來源分析
- **參與度**: 用戶發文、評論、互動頻次
- **留存分析**: 用戶黏性與流失率統計

#### 用戶畫像
- **角色分佈**: 管理員、編輯、一般用戶比例
- **地理分佈**: 基於 IP 的地理位置統計
- **設備分析**: 訪問設備與瀏覽器分佈
- **時間模式**: 用戶活躍時段分析

### 3. 🔥 熱門排行

#### 內容排行榜
- **熱門文章**: 按瀏覽量、互動量排序
- **話題標籤**: 最受關注的標籤與主題
- **作者排行**: 最活躍的內容創作者
- **搜索熱詞**: 用戶搜索關鍵詞統計

#### 即時熱點
- **實時趨勢**: 當前正在上升的熱門內容
- **病毒式傳播**: 快速擴散的文章追蹤
- **話題監控**: 特定主題的關注度變化

### 4. 🖥️ 系統統計

#### 效能監控
- **回應時間**: API 與頁面載入效能
- **資源使用**: CPU、記憶體、儲存使用情況
- **錯誤統計**: 系統錯誤類型與頻率分析
- **快取效能**: 快取命中率與效能提升

#### 安全指標
- **登入統計**: 成功/失敗登入嘗試
- **IP 監控**: 異常 IP 與攻擊嘗試統計
- **權限審計**: 權限變更與敏感操作記錄

---

## 🎨 視覺化儀表板

### 📱 管理員儀表板
專為系統管理員設計的綜合監控面板：

```
┌─────────────────────────────────────────────────────────────┐
│ 📊 AlleyNote 統計儀表板                                       │
├─────────────────────────────────────────────────────────────┤
│ 🔥 即時概覽                    │ 📈 本月趨勢                  │
│ • 今日新增文章: 12            │ • 文章增長: ↗️ +15.2%        │
│ • 活躍用戶: 89               │ • 用戶增長: ↗️ +8.7%         │
│ • 系統負載: 23%              │ • 互動增長: ↗️ +22.1%        │
├─────────────────────────────────────────────────────────────┤
│ 🏆 熱門內容 (本週)            │ 👥 用戶活動                   │
│ 1. 新功能發布公告 (892 views) │ • 線上用戶: 23               │
│ 2. 系統維護通知 (543 views)   │ • 本週註冊: 8                │
│ 3. 活動報名開始 (387 views)   │ • 待審核: 2                  │
├─────────────────────────────────────────────────────────────┤
│ ⚠️ 系統警示                   │ 📊 效能指標                   │
│ • 無異常狀況                  │ • 平均回應: 95ms              │
│ • 快取命中率: 94.2%           │ • 錯誤率: 0.01%               │
└─────────────────────────────────────────────────────────────┘
```

### 📊 營運分析面板
專為內容營運團隊設計：

- **內容效能追蹤**: 各類型內容的表現比較
- **用戶參與漏斗**: 從瀏覽到互動的轉化分析
- **時間趨勢圖表**: 多時間維度的數據變化
- **對比分析工具**: 不同時期、分類的數據對比

---

## 🕒 快照系統

### 快照機制
統計模組採用**快照存檔**機制，定期保存重要統計數據：

- **每日快照**: 每晚 2:00 自動生成，保存當日完整統計
- **週度快照**: 每週一生成，匯總過去一週的數據
- **月度快照**: 每月 1 日生成，提供月度營運報告
- **自訂快照**: 支援手動生成特定時間範圍的快照

### 歷史數據保留
- **完整歷史**: 所有快照永久保存，支援長期趨勢分析
- **快速查詢**: 優化的索引設計，秒級查詢歷史數據
- **數據匯出**: 支援 CSV、JSON 格式的數據匯出

---

## 🚀 技術特性

### 高效能架構
- **多層快取**: 記憶體 → Redis → 資料庫的三級快取策略
- **批量處理**: 統計任務採用批量處理，減少資料庫負載
- **非同步計算**: 複雜統計在背景執行，不影響用戶體驗
- **索引優化**: 針對統計查詢優化的資料庫索引

### 可擴展設計
- **模組化架構**: 每個統計維度獨立設計，易於擴展
- **插件機制**: 支援自訂統計指標與計算邏輯
- **API 介面**: RESTful API 支援第三方系統整合

---

## 🛠️ 管理工具

### 統計管理命令

#### 手動生成統計
```bash
# 生成當日所有統計快照
docker compose exec web php backend/scripts/statistics-calculation.php --periods=daily

# 生成特定週期統計
docker compose exec web php backend/scripts/statistics-calculation.php --periods=weekly,monthly

# 強制重新計算（覆蓋現有快照）
docker compose exec web php backend/scripts/statistics-calculation.php --periods=daily --force
```

#### 歷史數據回填
```bash
# 回填指定日期範圍的統計數據
docker compose exec web php backend/scripts/statistics-recalculation.php overview 2025-09-01 2025-09-27 --force

# 批量回填不同統計類型
docker compose exec web php backend/scripts/statistics-recalculation.php posts 2025-09-01 2025-09-27 --batch-size=7
```

#### 數據維護
```bash
# 清理過期的臨時統計數據
docker compose exec web php backend/scripts/statistics-cleanup.php --days=30

# 驗證統計數據完整性
docker compose exec web php backend/scripts/statistics-validation.php
```

### Web 管理介面
- **統計監控台**: `/admin/statistics` - 查看所有統計數據
- **快照管理**: `/admin/statistics/snapshots` - 管理歷史快照
- **效能監控**: `/admin/statistics/performance` - 系統效能儀表板

---

## 📈 使用場景

### 1. 📋 日常運營監控
**適用對象**: 社區管理員、內容營運
- 每日查看用戶活躍度與內容發布情況
- 識別需要關注的異常數據變化
- 追蹤重要公告的傳播效果

### 2. 📊 週期性分析報告
**適用對象**: 營運主管、決策層
- 週度/月度營運數據報告
- 用戶增長與留存分析
- 內容策略效果評估

### 3. 🎯 內容優化決策
**適用對象**: 內容編輯、營運團隊
- 識別受歡迎的內容類型與主題
- 優化發布時間與頻率
- 提升用戶參與度

### 4. 🔧 系統效能優化
**適用對象**: 技術團隊、系統管理員
- 監控系統負載與效能瓶頸
- 優化快取策略
- 規劃系統擴容

---

## 🔮 未來規劃

### 近期改進 (v1.3)
- **智能預警**: 基於機器學習的異常檢測與預警
- **自訂報表**: 用戶可自行配置個人化統計報表
- **行動端優化**: 響應式設計的統計儀表板

### 中期目標 (v2.0)
- **多平台整合**: 整合社交媒體數據分析
- **A/B 測試**: 內建 A/B 測試與效果分析工具
- **用戶分群**: 基於行為的精準用戶分群功能

---

## 🔗 相關資源

### 📚 深入文件
- [統計功能規格書](STATISTICS_FEATURE_SPECIFICATION.md) - 詳細技術規格
- [統計運維手冊](STATISTICS_OPERATIONS_MANUAL.md) - 系統管理指南
- [統計效能報告](STATISTICS_PERFORMANCE_REPORT.md) - 效能測試結果

### 🛠️ 技術文件
- [統計資料庫架構](STATISTICS_DATABASE_MIGRATION_GUIDE.md) - 資料庫設計
- [統計 API 文件](../API_DOCUMENTATION.md#統計-api) - REST API 規格
- [快取系統指南](../CACHE_TAGGING_SYSTEM_GUIDE.md) - 快取設計原理

### 🚀 相關工具
- [管理員手冊](../ADMIN_MANUAL.md#統計模組) - 運維操作說明
- [開發者指南](../DEVELOPER_GUIDE.md#統計模組開發) - 開發環境設置

---

**📧 反饋與支援**
- 功能建議: 請透過 [GitHub Issues](https://github.com/your-org/alleynote/issues/new?template=feature_request.md) 提交
- 技術問題: 請參考 [統計 FAQ](STATISTICS_OPERATIONS_MANUAL.md#常見問題) 或提交 Issue
- 文件更新: 歡迎提交 PR 協助改善文件內容

**🎯 模組狀態**: ✅ 生產就緒 | 📊 持續優化 | 🚀 功能豐富
