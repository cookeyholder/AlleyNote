# AlleyNote 測試環境配置
# 此檔案用於測試環境，包含適合自動化測試的設定值

# ===========================================
# 應用程式基本設定
# ===========================================
APP_NAME=AlleyNote-Test
APP_ENV=testing
APP_DEBUG=true
APP_URL=http://localhost
APP_KEY=base64:test-key-for-testing-only
APP_TIMEZONE=UTC

# ===========================================
# 資料庫設定 (測試環境使用記憶體資料庫)
# ===========================================
DB_CONNECTION=sqlite
DB_DATABASE=":memory:"

# 或使用獨立的測試資料庫
# DB_DATABASE=/var/www/html/database/alleynote_test.sqlite3

# ===========================================
# 上傳檔案設定 (測試環境較小限制)
# ===========================================
UPLOAD_MAX_SIZE=5M
UPLOAD_MAX_FILES=5
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,txt
STORAGE_PATH=/tmp/alleynote-test/storage/files

# ===========================================
# 快取設定 (測試環境使用陣列快取)
# ===========================================
CACHE_DRIVER=array
CACHE_TTL=60
CACHE_PATH=/tmp/alleynote-test/cache
REDIS_HOST=
REDIS_PORT=
REDIS_PASSWORD=

# ===========================================
# 安全性設定 (測試環境)
# ===========================================
SESSION_LIFETIME=120
CSRF_TOKEN_LIFETIME=120

# ===========================================
# 管理員帳號 (測試環境預設帳號)
# ===========================================
ADMIN_EMAIL=test@example.com
ADMIN_PASSWORD=Test@123456

# ===========================================
# API 限流設定 (測試環境無限制)
# ===========================================
RATE_LIMIT_REQUESTS=999999
RATE_LIMIT_MINUTES=1

# ===========================================
# 備份設定 (測試環境不需要)
# ===========================================
BACKUP_RETENTION_DAYS=1
BACKUP_PATH=/tmp/alleynote-test/backups

# ===========================================
# SSL / HTTPS 設定 (測試環境不使用)
# ===========================================
SSL_DOMAIN=localhost
SSL_EMAIL=test@localhost
CERTBOT_STAGING=true
FORCE_HTTPS=false
HSTS_MAX_AGE=0

# ===========================================
# JWT 配置 (測試環境)
# ===========================================
JWT_ALGORITHM=RS256
JWT_ISSUER=alleynote-test
JWT_AUDIENCE=alleynote-test-client
JWT_ACCESS_TOKEN_TTL=3600
JWT_REFRESH_TOKEN_TTL=7200
JWT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----
MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC7VJ8gZI+5
test-private-key-for-testing-only
-----END PRIVATE KEY-----"
JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAu1SfIGSPuV
test-public-key-for-testing-only
-----END PUBLIC KEY-----"

# ===========================================
# 使用者活動記錄設定 (測試環境)
# ===========================================
# 記錄等級: 測試環境記錄所有等級
ACTIVITY_LOG_LEVEL=debug
ACTIVITY_LOG_ENABLED=true

# 資料保留設定 (測試環境不清理)
ACTIVITY_LOG_RETENTION_DAYS=0
ACTIVITY_LOG_CLEANUP_ENABLED=false

# 效能設定 (測試環境小批次處理)
ACTIVITY_LOG_BATCH_SIZE=10
ACTIVITY_LOG_MAX_CONTEXT_LENGTH=1024
ACTIVITY_LOG_INCLUDE_STACK_TRACE=false

# 監控設定 (測試環境關閉監控)
ACTIVITY_LOG_MONITOR_PERFORMANCE=false
ACTIVITY_LOG_MONITOR_SUSPICIOUS_ACTIVITY=false
ACTIVITY_LOG_ALERT_THRESHOLD_PER_MINUTE=999999

# ===========================================
# 日誌設定 (測試環境記錄到記憶體或檔案)
# ===========================================
LOG_LEVEL=error
LOG_PATH=/tmp/alleynote-test/logs/test.log
LOG_CHANNEL=single
LOG_MAX_FILES=1

# ===========================================
# 測試環境特有設定
# ===========================================
# 測試模式
TESTING_MODE=true

# 停用外部服務
DISABLE_EXTERNAL_SERVICES=true

# 偽造時間 (用於時間相關測試)
FAKE_TIME_ENABLED=false

# 測試資料種子
AUTO_SEED_TEST_DATA=false

# 停用通知
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# 偵錯設定
DEBUG_SHOW_EXCEPTIONS=true
DEBUG_LOG_QUERIES=false
DEBUG_LOG_PERFORMANCE=false

# 測試覆蓋率
ENABLE_COVERAGE=false
COVERAGE_PATH=/tmp/alleynote-test/coverage

# 並行測試設定
PARALLEL_TESTING=false
TEST_WORKERS=1
