import"./index-DHmEDfox.js";import{p as n}from"./posts-D8uqMnbu.js";import"./vendor-core-DW9qjkZC.js";let e=1,t="";async function s(){document.getElementById("app").innerHTML='\n    <div class="min-h-screen bg-modern-50">\n      \x3c!-- 導航列 --\x3e\n      <nav class="bg-white shadow-sm sticky top-0 z-30">\n        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n          <div class="flex justify-between h-16 items-center">\n            <div class="flex items-center">\n              <h1 class="text-2xl font-bold text-accent-600">AlleyNote</h1>\n            </div>\n            <div class="flex items-center gap-4">\n              <div class="relative hidden md:block">\n                <input\n                  type="text"\n                  id="home-search"\n                  placeholder="搜尋文章..."\n                  class="w-64 px-4 py-2 pl-10 border border-modern-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-500"\n                />\n                <span class="absolute left-3 top-2.5 text-modern-400">🔍</span>\n              </div>\n              <button \n                onclick="window.location.href=\'/login\'"\n                class="btn-primary"\n              >\n                登入\n              </button>\n            </div>\n          </div>\n        </div>\n      </nav>\n      \n      \x3c!-- 主要內容 --\x3e\n      <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">\n        \x3c!-- Hero Section --\x3e\n        <div class="text-center mb-12 animate-fade-in">\n          <h2 class="text-4xl md:text-5xl font-bold text-modern-900 mb-4">\n            現代化公布欄系統\n          </h2>\n          <p class="text-xl text-modern-600 mb-8">\n            基於 DDD 架構的企業級應用程式\n          </p>\n        </div>\n        \n        \x3c!-- 特色卡片 --\x3e\n        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12 animate-slide-up">\n          <div class="card card-hover text-center">\n            <div class="text-4xl mb-4">🚀</div>\n            <h3 class="text-xl font-semibold mb-2">現代化技術</h3>\n            <p class="text-modern-600">Vite + Tailwind CSS + JavaScript</p>\n          </div>\n          \n          <div class="card card-hover text-center">\n            <div class="text-4xl mb-4">🛡️</div>\n            <h3 class="text-xl font-semibold mb-2">安全可靠</h3>\n            <p class="text-modern-600">JWT 認證 + XSS/CSRF 防護</p>\n          </div>\n          \n          <div class="card card-hover text-center">\n            <div class="text-4xl mb-4">⚡</div>\n            <h3 class="text-xl font-semibold mb-2">高效能</h3>\n            <p class="text-modern-600">快速載入 + 響應式設計</p>\n          </div>\n        </div>\n        \n        \x3c!-- 搜尋列 (手機版) --\x3e\n        <div class="mb-6 md:hidden">\n          <div class="relative">\n            <input\n              type="text"\n              id="home-search-mobile"\n              placeholder="搜尋文章..."\n              class="w-full px-4 py-3 pl-10 border border-modern-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-500"\n            />\n            <span class="absolute left-3 top-3.5 text-modern-400">🔍</span>\n          </div>\n        </div>\n        \n        \x3c!-- 最新文章標題 --\x3e\n        <div class="flex items-center justify-between mb-8">\n          <h3 class="text-2xl font-bold text-modern-900">最新文章</h3>\n          <div class="text-sm text-modern-600" id="posts-count">\n            \x3c!-- 文章數量 --\x3e\n          </div>\n        </div>\n        \n        \x3c!-- 文章列表 --\x3e\n        <div id="posts-container">\n          <div class="text-center py-12">\n            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-accent-600 mx-auto"></div>\n            <p class="mt-4 text-modern-600">載入中...</p>\n          </div>\n        </div>\n        \n        \x3c!-- 分頁 --\x3e\n        <div id="pagination-container" class="mt-8"></div>\n      </main>\n      \n      \x3c!-- 頁腳 --\x3e\n      <footer class="bg-white border-t border-modern-200 mt-20">\n        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n          <div class="text-center">\n            <p class="text-modern-600 mb-2">\n              © 2024 AlleyNote. All rights reserved.\n            </p>\n            <p class="text-sm text-modern-500">\n              基於 Domain-Driven Design 的企業級公布欄系統\n            </p>\n          </div>\n        </div>\n      </footer>\n    </div>\n  ',await o();const n=document.getElementById("home-search"),s=document.getElementById("home-search-mobile");n&&n.addEventListener("keypress",s=>{"Enter"===s.key&&(t=n.value,e=1,o())}),s&&s.addEventListener("keypress",n=>{"Enter"===n.key&&(t=s.value,e=1,o())})}async function o(){const s=document.getElementById("posts-container"),o=document.getElementById("posts-count");try{const a=await n.list({status:"published",search:t,page:e,per_page:9,sort:"-created_at"}),i=a.data||[],d=a.pagination||{};if(o&&(o.textContent=`共 ${d.total||0} 篇文章`),0===i.length)return s.innerHTML=`\n        <div class="text-center py-16">\n          <div class="text-6xl mb-4">📝</div>\n          <p class="text-xl text-modern-600 mb-2">\n            ${t?"找不到符合條件的文章":"目前沒有文章"}\n          </p>\n          ${t?'\n            <button \n              onclick="window.clearSearch()"\n              class="mt-4 text-accent-600 hover:text-accent-700"\n            >\n              清除搜尋條件\n            </button>\n          ':""}\n        </div>\n      `,void(document.getElementById("pagination-container").innerHTML="");s.innerHTML=`\n      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">\n        ${i.map(n=>function(n){var e;const t=n.excerpt||function(n,e=150){const t=n.replace(/<[^>]*>/g,"");if(t.length<=e)return t;return t.substring(0,e)+"..."}(n.content),s=new Date(n.created_at).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"});return`\n    <article class="card card-hover">\n      <div class="h-2 bg-accent-500 rounded-t-lg -mt-8 -mx-8 mb-4"></div>\n      <h4 class="text-lg font-semibold mb-2 text-modern-900 line-clamp-2">\n        <a href="/posts/${n.id}" class="hover:text-accent-600 transition-colors">\n          ${n.title}\n        </a>\n      </h4>\n      <p class="text-modern-600 text-sm mb-4 line-clamp-3">\n        ${t}\n      </p>\n      <div class="flex items-center justify-between text-sm text-modern-500">\n        <div class="flex items-center gap-2">\n          <span>📅</span>\n          <time datetime="${n.created_at}">${s}</time>\n        </div>\n        <div class="flex items-center gap-2">\n          <span>👤</span>\n          <span>${(null==(e=n.author)?void 0:e.name)||"匿名"}</span>\n        </div>\n      </div>\n      ${n.tags&&n.tags.length>0?`\n        <div class="mt-4 flex flex-wrap gap-2">\n          ${n.tags.slice(0,3).map(n=>`\n            <span class="px-2 py-1 bg-accent-100 text-accent-700 rounded text-xs">\n              #${n}\n            </span>\n          `).join("")}\n        </div>\n      `:""}\n    </article>\n  `}(n)).join("")}\n      </div>\n    `,function(n){const e=document.getElementById("pagination-container");if(!n||n.total_pages<=1)return void(e.innerHTML="");const{page:t,total_pages:s}=n,o=[];for(let a=1;a<=s;a++)1===a||a===s||a>=t-2&&a<=t+2?o.push(a):"..."!==o[o.length-1]&&o.push("...");e.innerHTML=`\n    <div class="flex items-center justify-center gap-2">\n      <button \n        onclick="window.homeGoToPage(${t-1})"\n        ${1===t?"disabled":""}\n        class="px-4 py-2 border border-modern-300 rounded-lg hover:bg-modern-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"\n      >\n        上一頁\n      </button>\n      ${o.map(n=>"..."===n?'<span class="px-4 py-2 text-modern-500">...</span>':`\n          <button \n            onclick="window.homeGoToPage(${n})"\n            class="px-4 py-2 border border-modern-300 rounded-lg hover:bg-modern-50 transition-colors ${n===t?"bg-accent-600 text-white border-accent-600":""}"\n          >\n            ${n}\n          </button>\n        `).join("")}\n      <button \n        onclick="window.homeGoToPage(${t+1})"\n        ${t===s?"disabled":""}\n        class="px-4 py-2 border border-modern-300 rounded-lg hover:bg-modern-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"\n      >\n        下一頁\n      </button>\n    </div>\n  `}(d)}catch(a){s.innerHTML=`\n      <div class="text-center py-16">\n        <div class="text-6xl mb-4">⚠️</div>\n        <p class="text-xl text-red-600 mb-4">載入失敗：${a.message}</p>\n        <button \n          onclick="location.reload()"\n          class="btn-primary"\n        >\n          重新載入\n        </button>\n      </div>\n    `}}window.homeGoToPage=function(n){e=n,o(),window.scrollTo({top:0,behavior:"smooth"})},window.clearSearch=function(){t="",e=1;const n=document.getElementById("home-search"),s=document.getElementById("home-search-mobile");n&&(n.value=""),s&&(s.value=""),o()};export{s as renderHome};
