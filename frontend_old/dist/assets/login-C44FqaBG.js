import{a as e,g as n,r as t}from"./index-DHmEDfox.js";import{t as r}from"./toast-ChPGQGGG.js";import{F as s,V as a}from"./formValidator-BZ20TrvF.js";import{l as o}from"./Loading-D3hznI52.js";import"./vendor-core-DW9qjkZC.js";import"./vendor-ckeditor-HyW9E3ya.js";function i(){document.getElementById("app").innerHTML='\n    <div class="min-h-screen bg-gradient-to-br from-accent-50 to-accent-100 flex items-center justify-center p-4">\n      <div class="card max-w-md w-full animate-fade-in">\n        <div class="text-center mb-8">\n          <h1 class="text-3xl font-bold text-modern-900 mb-2">AlleyNote</h1>\n          <p class="text-modern-600">歡迎回來，請登入您的帳號</p>\n        </div>\n        \n        <form id="login-form" class="space-y-6">\n          <div>\n            <label for="email" class="block text-sm font-medium text-modern-700 mb-2">\n              電子郵件 *\n            </label>\n            <input\n              type="email"\n              id="email"\n              name="email"\n              required\n              autocomplete="email"\n              class="input-field"\n              placeholder="your@email.com"\n            />\n            <p class="text-red-500 text-sm mt-1 hidden" data-error-for="email"></p>\n          </div>\n          \n          <div>\n            <label for="password" class="block text-sm font-medium text-modern-700 mb-2">\n              密碼 *\n            </label>\n            <input\n              type="password"\n              id="password"\n              name="password"\n              required\n              autocomplete="current-password"\n              class="input-field"\n              placeholder="••••••••"\n            />\n            <p class="text-red-500 text-sm mt-1 hidden" data-error-for="password"></p>\n          </div>\n          \n          <div class="flex items-center justify-between">\n            <label class="flex items-center">\n              <input\n                type="checkbox"\n                id="remember"\n                name="remember"\n                class="w-4 h-4 text-accent-600 border-modern-300 rounded focus:ring-accent-500"\n              />\n              <span class="ml-2 text-sm text-modern-700">記住我</span>\n            </label>\n            <a href="/forgot-password" class="text-sm text-accent-600 hover:text-accent-700">\n              忘記密碼？\n            </a>\n          </div>\n          \n          <button\n            type="submit"\n            class="btn-primary w-full"\n            id="login-btn"\n          >\n            登入\n          </button>\n        </form>\n        \n        <div class="mt-6 text-center">\n          <p class="text-sm text-modern-600 mb-2">測試帳號：</p>\n          <div class="bg-modern-50 p-3 rounded-lg text-sm">\n            <p class="font-mono">admin@example.com / password</p>\n          </div>\n        </div>\n        \n        <div class="mt-6 text-center text-xs text-modern-500">\n          <p>登入即表示您同意我們的服務條款和隱私政策</p>\n        </div>\n      </div>\n    </div>\n  ',function(){const i=document.getElementById("login-form"),d=document.getElementById("login-btn"),m=new s(i,{email:[a.required("請輸入電子郵件"),a.email("請輸入有效的電子郵件格式")],password:[a.required("請輸入密碼"),a.min(6,"密碼至少需要 6 個字元")]});i.addEventListener("submit",async s=>{if(s.preventDefault(),m.clearErrors(),!m.validate())return void m.showErrors();const a=i.email.value,l=i.password.value,c=i.remember.checked;d.disabled=!0,d.textContent="登入中...",o.show("登入中...");try{const s=await e.login({email:a,password:l,remember:c});n.setUser(s.user),o.hide(),r.success("登入成功！歡迎回來"),setTimeout(()=>{t.navigate("/admin/dashboard")},500)}catch(p){if(o.hide(),p&&"function"==typeof p.isValidationError&&p.isValidationError()){const e=p.getValidationErrors();Object.entries(e).forEach(([e,n])=>{const t=document.querySelector(`[data-error-for="${e}"]`);t&&(t.textContent=Array.isArray(n)?n[0]:n,t.classList.remove("hidden"))})}else{let e="登入失敗，請檢查您的帳號密碼";p&&"function"==typeof p.getUserMessage?e=p.getUserMessage():p&&p.message?e=p.message:"string"==typeof p&&(e=p),r.error(e)}d.disabled=!1,d.textContent="登入"}}),i.querySelectorAll("input").forEach(e=>{e.addEventListener("input",()=>{const n=document.querySelector(`[data-error-for="${e.name}"]`);n&&n.classList.add("hidden"),e.classList.remove("border-red-500")})})}()}export{i as renderLogin};
