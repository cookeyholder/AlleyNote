import{e}from"./index-DHmEDfox.js";import{t as n}from"./toast-ChPGQGGG.js";import{l as t}from"./Loading-D3hznI52.js";import"./vendor-core-DW9qjkZC.js";async function r(){const t=document.getElementById("app-content");"super_admin"===e.getState("currentUser").role?(t.innerHTML='\n        <div class="p-6">\n            \x3c!-- 頁面標題 --\x3e\n            <div class="mb-8">\n                <h1 class="text-3xl font-bold text-gray-900 mb-2">\n                    <i class="fas fa-cog text-gray-600 mr-2"></i>\n                    系統設定\n                </h1>\n                <p class="text-gray-600">管理網站全域設定與系統參數</p>\n            </div>\n\n            \x3c!-- 設定表單 --\x3e\n            <div class="max-w-4xl">\n                <form id="settings-form" class="space-y-6">\n                    \x3c!-- 基本設定 --\x3e\n                    <div class="bg-white rounded-2xl border border-gray-200 p-6">\n                        <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">\n                            <i class="fas fa-globe text-blue-500 mr-2"></i>\n                            基本設定\n                        </h2>\n\n                        <div class="space-y-4">\n                            \x3c!-- 網站標題 --\x3e\n                            <div>\n                                <label for="site-title" class="block text-sm font-medium text-gray-700 mb-2">\n                                    網站標題\n                                </label>\n                                <input\n                                    type="text"\n                                    id="site-title"\n                                    name="site_title"\n                                    class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"\n                                    placeholder="輸入網站標題"\n                                >\n                            </div>\n\n                            \x3c!-- 網站描述 --\x3e\n                            <div>\n                                <label for="site-description" class="block text-sm font-medium text-gray-700 mb-2">\n                                    網站描述\n                                </label>\n                                <textarea\n                                    id="site-description"\n                                    name="site_description"\n                                    rows="3"\n                                    class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"\n                                    placeholder="輸入網站描述"\n                                ></textarea>\n                            </div>\n\n                            \x3c!-- 網站關鍵字 --\x3e\n                            <div>\n                                <label for="site-keywords" class="block text-sm font-medium text-gray-700 mb-2">\n                                    網站關鍵字\n                                </label>\n                                <input\n                                    type="text"\n                                    id="site-keywords"\n                                    name="site_keywords"\n                                    class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"\n                                    placeholder="輸入關鍵字，以逗號分隔"\n                                >\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- 外觀設定 --\x3e\n                    <div class="bg-white rounded-2xl border border-gray-200 p-6">\n                        <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">\n                            <i class="fas fa-palette text-purple-500 mr-2"></i>\n                            外觀設定\n                        </h2>\n\n                        <div class="space-y-4">\n                            \x3c!-- Logo 上傳 --\x3e\n                            <div>\n                                <label class="block text-sm font-medium text-gray-700 mb-2">\n                                    網站 Logo\n                                </label>\n                                <div class="flex items-center gap-4">\n                                    <div id="logo-preview" class="w-32 h-32 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border border-gray-200">\n                                        <i class="fas fa-image text-4xl text-gray-400"></i>\n                                    </div>\n                                    <div class="flex-1">\n                                        <input\n                                            type="file"\n                                            id="logo-input"\n                                            accept="image/*"\n                                            class="hidden"\n                                        >\n                                        <button\n                                            type="button"\n                                            id="upload-logo-btn"\n                                            class="px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"\n                                        >\n                                            <i class="fas fa-upload mr-2"></i>\n                                            上傳 Logo\n                                        </button>\n                                        <p class="text-sm text-gray-500 mt-2">\n                                            建議尺寸：200x200 像素，格式：PNG, JPG, SVG\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n\n                            \x3c!-- 主題色彩 --\x3e\n                            <div>\n                                <label for="theme-color" class="block text-sm font-medium text-gray-700 mb-2">\n                                    主題色彩\n                                </label>\n                                <input\n                                    type="color"\n                                    id="theme-color"\n                                    name="theme_color"\n                                    class="h-10 w-20 border border-gray-300 rounded-lg cursor-pointer"\n                                    value="#3b82f6"\n                                >\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- 功能設定 --\x3e\n                    <div class="bg-white rounded-2xl border border-gray-200 p-6">\n                        <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">\n                            <i class="fas fa-toggle-on text-green-500 mr-2"></i>\n                            功能設定\n                        </h2>\n\n                        <div class="space-y-4">\n                            \x3c!-- 維護模式 --\x3e\n                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">\n                                <div>\n                                    <h3 class="font-medium text-gray-900">維護模式</h3>\n                                    <p class="text-sm text-gray-600 mt-1">\n                                        啟用後，訪客將無法訪問網站，僅管理員可登入\n                                    </p>\n                                </div>\n                                <label class="relative inline-flex items-center cursor-pointer">\n                                    <input\n                                        type="checkbox"\n                                        id="maintenance-mode"\n                                        name="maintenance_mode"\n                                        class="sr-only peer"\n                                    >\n                                    <div class="w-11 h-6 bg-gray-300 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[\'\'] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>\n                                </label>\n                            </div>\n\n                            \x3c!-- 允許註冊 --\x3e\n                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">\n                                <div>\n                                    <h3 class="font-medium text-gray-900">允許使用者註冊</h3>\n                                    <p class="text-sm text-gray-600 mt-1">\n                                        啟用後，訪客可以註冊新帳號\n                                    </p>\n                                </div>\n                                <label class="relative inline-flex items-center cursor-pointer">\n                                    <input\n                                        type="checkbox"\n                                        id="allow-registration"\n                                        name="allow_registration"\n                                        class="sr-only peer"\n                                    >\n                                    <div class="w-11 h-6 bg-gray-300 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[\'\'] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>\n                                </label>\n                            </div>\n\n                            \x3c!-- 允許留言 --\x3e\n                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">\n                                <div>\n                                    <h3 class="font-medium text-gray-900">允許文章留言</h3>\n                                    <p class="text-sm text-gray-600 mt-1">\n                                        啟用後，訪客可以在文章下方留言\n                                    </p>\n                                </div>\n                                <label class="relative inline-flex items-center cursor-pointer">\n                                    <input\n                                        type="checkbox"\n                                        id="allow-comments"\n                                        name="allow_comments"\n                                        class="sr-only peer"\n                                    >\n                                    <div class="w-11 h-6 bg-gray-300 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[\'\'] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- 內容設定 --\x3e\n                    <div class="bg-white rounded-2xl border border-gray-200 p-6">\n                        <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">\n                            <i class="fas fa-file-alt text-orange-500 mr-2"></i>\n                            內容設定\n                        </h2>\n\n                        <div class="space-y-4">\n                            \x3c!-- 每頁文章數 --\x3e\n                            <div>\n                                <label for="posts-per-page" class="block text-sm font-medium text-gray-700 mb-2">\n                                    每頁文章數\n                                </label>\n                                <input\n                                    type="number"\n                                    id="posts-per-page"\n                                    name="posts_per_page"\n                                    min="5"\n                                    max="50"\n                                    class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"\n                                    value="10"\n                                >\n                            </div>\n\n                            \x3c!-- 摘要長度 --\x3e\n                            <div>\n                                <label for="excerpt-length" class="block text-sm font-medium text-gray-700 mb-2">\n                                    文章摘要長度（字元）\n                                </label>\n                                <input\n                                    type="number"\n                                    id="excerpt-length"\n                                    name="excerpt_length"\n                                    min="50"\n                                    max="500"\n                                    class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"\n                                    value="200"\n                                >\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- 儲存按鈕 --\x3e\n                    <div class="flex justify-end gap-3">\n                        <button\n                            type="button"\n                            id="reset-btn"\n                            class="px-6 py-2.5 text-gray-700 bg-white border-2 border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"\n                        >\n                            <i class="fas fa-undo mr-2"></i>\n                            重置\n                        </button>\n                        <button\n                            type="submit"\n                            class="px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"\n                        >\n                            <i class="fas fa-save mr-2"></i>\n                            儲存設定\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    ',await l(),function(){const e=document.getElementById("settings-form"),t=document.getElementById("upload-logo-btn"),r=document.getElementById("logo-input"),o=document.getElementById("reset-btn");null==e||e.addEventListener("submit",a),null==t||t.addEventListener("click",()=>{null==r||r.click()}),null==r||r.addEventListener("change",s),null==o||o.addEventListener("click",()=>{l(),n.info("已重置為原始設定")})}()):t.innerHTML='\n            <div class="flex flex-col items-center justify-center min-h-screen">\n                <i class="fas fa-lock text-6xl text-gray-400 mb-4"></i>\n                <h2 class="text-2xl font-bold text-gray-900 mb-2">權限不足</h2>\n                <p class="text-gray-600">您沒有權限訪問此頁面</p>\n            </div>\n        '}async function l(){try{t.show();!function(e){const n=document.getElementById("settings-form");if(!n)return;Object.keys(e).forEach(t=>{const r=n.querySelector(`[name="${t}"]`);r&&("checkbox"===r.type?r.checked=e[t]:r.value=e[t])})}({site_title:"AlleyNote",site_description:"一個簡潔優雅的部落格系統",site_keywords:"部落格,技術文章,分享",theme_color:"#3b82f6",maintenance_mode:!1,allow_registration:!1,allow_comments:!0,posts_per_page:10,excerpt_length:200})}catch(e){n.error("載入設定失敗")}finally{t.hide()}}async function a(e){e.preventDefault();const r=e.target,l=new FormData(r);for(const[n,t]of l.entries()){const e=r.querySelector(`[name="${n}"]`);"checkbox"===(null==e?void 0:e.type)&&e.checked}try{t.show(),await new Promise(e=>setTimeout(e,1e3)),n.success("設定已儲存")}catch(a){n.error("儲存設定失敗")}finally{t.hide()}}async function s(e){var r;const l=null==(r=e.target.files)?void 0:r[0];if(l)if(l.type.startsWith("image/"))if(l.size>2097152)n.error("圖片大小不能超過 2MB");else try{t.show();const e=new FileReader;e.onload=e=>{const n=document.getElementById("logo-preview");n&&(n.innerHTML=`<img src="${e.target.result}" class="w-full h-full object-contain" alt="Logo">`)},e.readAsDataURL(l),n.success("Logo 上傳成功")}catch(a){n.error("上傳 Logo 失敗")}finally{t.hide()}else n.error("請上傳圖片檔案")}export{r as renderSettingsPage};
