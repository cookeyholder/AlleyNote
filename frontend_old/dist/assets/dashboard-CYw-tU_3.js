import{r as t,b as n}from"./DashboardLayout-BjmJ-OJc.js";import{b as e,r as s}from"./index-DHmEDfox.js";import{p as a}from"./posts-D8uqMnbu.js";import"./toast-ChPGQGGG.js";import"./vendor-core-DW9qjkZC.js";async function d(){e.getCurrentUser();const d=`\n    <div>\n      <h1 class="text-3xl font-bold text-modern-900 mb-8">å„€è¡¨æ¿</h1>\n      \n      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8" id="stats-cards">\n        \x3c!-- çµ±è¨ˆå¡ç‰‡è¼‰å…¥ä¸­ --\x3e\n      </div>\n      \n      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">\n        \x3c!-- æœ€è¿‘æ–‡ç«  --\x3e\n        <div class="card">\n          <h2 class="text-xl font-semibold text-modern-900 mb-4">æœ€è¿‘ç™¼å¸ƒçš„æ–‡ç« </h2>\n          <div id="recent-posts" class="space-y-3">\n            \x3c!-- è¼‰å…¥ä¸­ --\x3e\n          </div>\n          <div class="mt-4">\n            <a href="/admin/posts" data-navigo class="text-accent-600 hover:text-accent-700 text-sm font-medium">\n              æŸ¥çœ‹æ‰€æœ‰æ–‡ç«  â†’\n            </a>\n          </div>\n        </div>\n        \n        \x3c!-- å¿«é€Ÿæ“ä½œ --\x3e\n        <div class="card">\n          <h2 class="text-xl font-semibold text-modern-900 mb-4">å¿«é€Ÿæ“ä½œ</h2>\n          <div class="space-y-3">\n            <a href="/admin/posts/create" data-navigo class="block p-4 border-2 border-modern-200 rounded-lg hover:border-accent-500 hover:bg-accent-50 transition-all">\n              <div class="flex items-center gap-3">\n                <span class="text-2xl">âœï¸</span>\n                <div>\n                  <h3 class="font-medium text-modern-900">æ–°å¢æ–‡ç« </h3>\n                  <p class="text-sm text-modern-600">å»ºç«‹æ–°çš„å…¬å‘Šæˆ–æ–‡ç« </p>\n                </div>\n              </div>\n            </a>\n            \n            <a href="/admin/posts" data-navigo class="block p-4 border-2 border-modern-200 rounded-lg hover:border-accent-500 hover:bg-accent-50 transition-all">\n              <div class="flex items-center gap-3">\n                <span class="text-2xl">ğŸ“‹</span>\n                <div>\n                  <h3 class="font-medium text-modern-900">ç®¡ç†æ–‡ç« </h3>\n                  <p class="text-sm text-modern-600">ç·¨è¼¯æˆ–åˆªé™¤ç¾æœ‰æ–‡ç« </p>\n                </div>\n              </div>\n            </a>\n            \n            ${e.isAdmin()?'\n              <a href="/admin/users" data-navigo class="block p-4 border-2 border-modern-200 rounded-lg hover:border-accent-500 hover:bg-accent-50 transition-all">\n                <div class="flex items-center gap-3">\n                  <span class="text-2xl">ğŸ‘¥</span>\n                  <div>\n                    <h3 class="font-medium text-modern-900">ä½¿ç”¨è€…ç®¡ç†</h3>\n                    <p class="text-sm text-modern-600">ç®¡ç†ç³»çµ±ä½¿ç”¨è€…</p>\n                  </div>\n                </div>\n              </a>\n            ':""}\n          </div>\n        </div>\n      </div>\n    </div>\n  `;document.getElementById("app").innerHTML=t(d),n(),s.updatePageLinks(),await async function(){var t;try{const n=await a.list({page:1,per_page:100}),e=n.data||[],d=(null==(t=n.pagination)?void 0:t.total)||0,r=e.filter(t=>"published"===t.status).length,c=e.filter(t=>"draft"===t.status).length,i=e.reduce((t,n)=>t+(parseInt(n.views)||0),0),l=document.getElementById("stats-cards");l&&(l.innerHTML=`\n        <div class="card">\n          <div class="flex items-center justify-between mb-4">\n            <h3 class="text-sm font-medium text-modern-600">ç¸½æ–‡ç« æ•¸</h3>\n            <span class="text-2xl">ğŸ“</span>\n          </div>\n          <p class="text-3xl font-bold text-modern-900">${d}</p>\n          <p class="text-sm text-modern-500 mt-2">å·²ç™¼å¸ƒ ${r} ç¯‡</p>\n        </div>\n        \n        <div class="card">\n          <div class="flex items-center justify-between mb-4">\n            <h3 class="text-sm font-medium text-modern-600">ç¸½ç€è¦½é‡</h3>\n            <span class="text-2xl">ğŸ‘ï¸</span>\n          </div>\n          <p class="text-3xl font-bold text-modern-900">${i.toLocaleString()}</p>\n          <p class="text-sm text-modern-500 mt-2">å…¨éƒ¨æ–‡ç« ç´¯è¨ˆ</p>\n        </div>\n        \n        <div class="card">\n          <div class="flex items-center justify-between mb-4">\n            <h3 class="text-sm font-medium text-modern-600">è‰ç¨¿æ•¸</h3>\n            <span class="text-2xl">âœï¸</span>\n          </div>\n          <p class="text-3xl font-bold text-modern-900">${c}</p>\n          <p class="text-sm text-modern-600 mt-2">å¾…ç™¼å¸ƒ</p>\n        </div>\n        \n        <div class="card">\n          <div class="flex items-center justify-between mb-4">\n            <h3 class="text-sm font-medium text-modern-600">å·²ç™¼å¸ƒ</h3>\n            <span class="text-2xl">âœ…</span>\n          </div>\n          <p class="text-3xl font-bold text-modern-900">${r}</p>\n          <p class="text-sm text-modern-500 mt-2">ç·šä¸Šä¸­çš„æ–‡ç« </p>\n        </div>\n      `);const o=e.sort((t,n)=>new Date(n.created_at)-new Date(t.created_at)).slice(0,5),m=document.getElementById("recent-posts");m&&(0===o.length?m.innerHTML='\n          <div class="text-center py-8 text-modern-500">\n            <p>å°šç„¡æ–‡ç« </p>\n            <a href="/admin/posts/create" data-navigo class="text-accent-600 hover:text-accent-700 mt-2 inline-block">\n              ç«‹å³æ–°å¢ç¬¬ä¸€ç¯‡æ–‡ç« \n            </a>\n          </div>\n        ':m.innerHTML=o.map((t,n)=>{const e=new Date(t.created_at).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"});return`\n            <div class="flex items-center justify-between py-3 ${n<o.length-1?"border-b border-modern-100":""}">\n              <div class="flex-1 min-w-0">\n                <h3 class="font-medium text-modern-900 truncate">${t.title}</h3>\n                <div class="flex items-center gap-2 mt-1">\n                  <p class="text-sm text-modern-500">${e}</p>\n                  ${t.author?`<span class="text-sm text-modern-400">Â·</span><p class="text-sm text-modern-500">${t.author}</p>`:""}\n                </div>\n              </div>\n              <span class="ml-4 px-3 py-1 ${"published"===t.status?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"} text-sm rounded-full whitespace-nowrap">\n                ${"published"===t.status?"å·²ç™¼å¸ƒ":"è‰ç¨¿"}\n              </span>\n            </div>\n          `}).join(""),s.updatePageLinks())}catch(n){const t=document.getElementById("stats-cards");t&&(t.innerHTML='\n        <div class="col-span-4 card">\n          <p class="text-red-600">è¼‰å…¥çµ±è¨ˆè³‡æ–™å¤±æ•—ï¼Œè«‹é‡æ–°æ•´ç†é é¢</p>\n        </div>\n      ')}}()}export{d as renderDashboard};
