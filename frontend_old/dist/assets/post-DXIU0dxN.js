import{p as n}from"./posts-D8uqMnbu.js";import{r as e}from"./index-DHmEDfox.js";import{t}from"./toast-ChPGQGGG.js";import{l as s}from"./Loading-D3hznI52.js";import{p as a}from"./vendor-core-DW9qjkZC.js";async function r(r){var i;s.show("載入文章中...");try{const e=await n.get(r);s.hide();const t=a.sanitize(e.content,{ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","p","br","strong","em","u","s","a","img","ul","ol","li","blockquote","pre","code","table","thead","tbody","tr","th","td","div","span"],ALLOWED_ATTR:["href","src","alt","title","class","id","target","rel"]});document.getElementById("app").innerHTML=`\n      <div class="min-h-screen bg-modern-50">\n        \x3c!-- 導航列 --\x3e\n        <nav class="bg-white shadow-sm border-b border-modern-200">\n          <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">\n            <div class="flex justify-between h-16 items-center">\n              <div class="flex items-center">\n                <a href="/" class="text-2xl font-bold text-accent-600">AlleyNote</a>\n              </div>\n              <div>\n                <a href="/" class="text-modern-600 hover:text-modern-900">\n                  ← 返回首頁\n                </a>\n              </div>\n            </div>\n          </div>\n        </nav>\n        \n        \x3c!-- 文章內容 --\x3e\n        <article class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">\n          \x3c!-- 文章標頭 --\x3e\n          <header class="mb-8">\n            <h1 class="text-4xl font-bold text-modern-900 mb-4 animate-fade-in">\n              ${e.title}\n            </h1>\n            \n            <div class="flex items-center gap-6 text-sm text-modern-600">\n              <div class="flex items-center gap-2">\n                <span>👤</span>\n                <span>${(null==(i=e.author)?void 0:i.name)||"匿名"}</span>\n              </div>\n              <div class="flex items-center gap-2">\n                <span>📅</span>\n                <time datetime="${e.created_at}">\n                  ${new Date(e.created_at).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"})}\n                </time>\n              </div>\n              ${e.views?`\n                <div class="flex items-center gap-2">\n                  <span>👁️</span>\n                  <span>${e.views} 次瀏覽</span>\n                </div>\n              `:""}\n            </div>\n          </header>\n          \n          \x3c!-- 文章內容 --\x3e\n          <div class="card animate-slide-up">\n            <div class="prose prose-modern max-w-none">\n              ${t}\n            </div>\n          </div>\n          \n          \x3c!-- 標籤 --\x3e\n          ${e.tags&&e.tags.length>0?`\n            <div class="mt-8 flex flex-wrap gap-2">\n              ${e.tags.map(n=>`\n                <span class="px-3 py-1 bg-accent-100 text-accent-700 rounded-full text-sm">\n                  #${n}\n                </span>\n              `).join("")}\n            </div>\n          `:""}\n          \n          \x3c!-- 相關文章 --\x3e\n          <div class="mt-12">\n            <h2 class="text-2xl font-bold text-modern-900 mb-6">相關文章</h2>\n            <div id="related-posts" class="grid grid-cols-1 md:grid-cols-2 gap-6">\n              <div class="text-center py-8 text-modern-600">載入中...</div>\n            </div>\n          </div>\n        </article>\n        \n        \x3c!-- 頁腳 --\x3e\n        <footer class="bg-white border-t border-modern-200 mt-20">\n          <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n            <p class="text-center text-modern-600">\n              © 2024 AlleyNote. All rights reserved.\n            </p>\n          </div>\n        </footer>\n      </div>\n    `,async function(e){const t=document.getElementById("related-posts");try{const s=(await n.list({status:"published",per_page:4,exclude:e})).data||[];if(0===s.length)return void(t.innerHTML='\n        <div class="col-span-2 text-center py-8 text-modern-600">\n          目前沒有相關文章\n        </div>\n      ');t.innerHTML=s.slice(0,2).map(n=>`\n      <a href="/posts/${n.id}" class="card card-hover block">\n        <h3 class="text-lg font-semibold text-modern-900 mb-2">\n          ${n.title}\n        </h3>\n        ${n.excerpt?`\n          <p class="text-modern-600 text-sm mb-4 line-clamp-2">\n            ${n.excerpt}\n          </p>\n        `:""}\n        <div class="flex items-center justify-between text-sm text-modern-500">\n          <span>${new Date(n.created_at).toLocaleDateString("zh-TW")}</span>\n          <span class="text-accent-600 hover:text-accent-700">閱讀更多 →</span>\n        </div>\n      </a>\n    `).join("")}catch(s){t.innerHTML='\n      <div class="col-span-2 text-center py-8 text-modern-600">\n        載入相關文章失敗\n      </div>\n    '}}(r)}catch(d){s.hide(),t.error("載入文章失敗："+d.message),e.navigate("/")}}export{r as renderPost};
