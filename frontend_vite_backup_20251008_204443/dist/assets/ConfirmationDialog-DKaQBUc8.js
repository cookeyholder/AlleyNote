const e=new class{constructor(){this.container=null,this.isOpen=!1,this.onConfirm=null,this.onCancel=null}show({title:e,message:n,confirmText:t="確認",cancelText:i="取消",type:o="warning"}){return new Promise(s=>{this.isOpen=!0,this.render({title:e,message:n,confirmText:t,cancelText:i,type:o}),this.onConfirm=()=>{this.close(),s(!0)},this.onCancel=()=>{this.close(),s(!1)},this.bindEvents()})}render({title:e,message:n,confirmText:t,cancelText:i,type:o}){let s,a,r;switch(this.container&&this.container.remove(),o){case"danger":s="fa-exclamation-triangle",a="text-red-500",r="bg-red-600 hover:bg-red-700 focus:ring-red-500";break;case"info":s="fa-info-circle",a="text-blue-500",r="bg-blue-600 hover:bg-blue-700 focus:ring-blue-500";break;default:s="fa-exclamation-circle",a="text-yellow-500",r="bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"}this.container=document.createElement("div"),this.container.id="confirmation-dialog",this.container.className="fixed inset-0 z-[9999] overflow-y-auto flex items-center justify-center p-4",this.container.innerHTML=`\n            \x3c!-- 背景遮罩 --\x3e\n            <div class="fixed inset-0 bg-black bg-opacity-50 transition-opacity" data-backdrop></div>\n            \n            \x3c!-- 對話框內容 --\x3e\n            <div class="relative bg-white rounded-2xl shadow-xl max-w-md w-full p-6 transform transition-all animate-fade-in-up">\n                \x3c!-- 圖示 --\x3e\n                <div class="flex items-center justify-center w-12 h-12 mx-auto mb-4 rounded-full bg-gray-100">\n                    <i class="fas ${s} text-2xl ${a}"></i>\n                </div>\n                \n                \x3c!-- 標題 --\x3e\n                <h3 class="text-xl font-bold text-center text-gray-900 mb-2">\n                    ${this.escapeHtml(e)}\n                </h3>\n                \n                \x3c!-- 訊息 --\x3e\n                <p class="text-gray-600 text-center mb-6">\n                    ${this.escapeHtml(n)}\n                </p>\n                \n                \x3c!-- 按鈕 --\x3e\n                <div class="flex gap-3">\n                    <button\n                        type="button"\n                        class="flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 bg-white border-2 border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors"\n                        data-cancel\n                    >\n                        ${this.escapeHtml(i)}\n                    </button>\n                    <button\n                        type="button"\n                        class="flex-1 px-4 py-2.5 text-sm font-medium text-white ${r} rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors"\n                        data-confirm\n                        autofocus\n                    >\n                        ${this.escapeHtml(t)}\n                    </button>\n                </div>\n            </div>\n        `,document.body.appendChild(this.container),document.body.style.overflow="hidden"}bindEvents(){if(!this.container)return;const e=this.container.querySelector("[data-confirm]"),n=this.container.querySelector("[data-cancel]"),t=this.container.querySelector("[data-backdrop]");null==e||e.addEventListener("click",()=>{var e;return null==(e=this.onConfirm)?void 0:e.call(this)}),null==n||n.addEventListener("click",()=>{var e;return null==(e=this.onCancel)?void 0:e.call(this)}),null==t||t.addEventListener("click",()=>{var e;return null==(e=this.onCancel)?void 0:e.call(this)}),this.handleKeyDown=e=>{var n;"Escape"===e.key&&this.isOpen&&(null==(n=this.onCancel)||n.call(this))},document.addEventListener("keydown",this.handleKeyDown)}close(){this.isOpen=!1,this.handleKeyDown&&document.removeEventListener("keydown",this.handleKeyDown),this.container&&(this.container.remove(),this.container=null),document.body.style.overflow=""}escapeHtml(e){const n=document.createElement("div");return n.textContent=e,n.innerHTML}};function n(n="此項目"){return e.show({title:"確認刪除",message:`您確定要刪除「${n}」嗎？此操作無法復原。`,confirmText:"刪除",cancelText:"取消",type:"danger"})}function t(){return e.show({title:"放棄變更",message:"您有未儲存的變更，確定要離開此頁面嗎？",confirmText:"放棄",cancelText:"繼續編輯",type:"warning"})}export{t as a,n as c};
