import{r as t,b as n}from"./DashboardLayout-BjmJ-OJc.js";import{b as e,r as s}from"./index-DHmEDfox.js";import{p as a}from"./posts-D8uqMnbu.js";import"./toast-ChPGQGGG.js";import"./vendor-core-DW9qjkZC.js";async function d(){e.getCurrentUser();const d=`\n    <div>\n      <h1 class="text-3xl font-bold text-modern-900 mb-8">儀表板</h1>\n      \n      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8" id="stats-cards">\n        \x3c!-- 統計卡片載入中 --\x3e\n      </div>\n      \n      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">\n        \x3c!-- 最近文章 --\x3e\n        <div class="card">\n          <h2 class="text-xl font-semibold text-modern-900 mb-4">最近發布的文章</h2>\n          <div id="recent-posts" class="space-y-3">\n            \x3c!-- 載入中 --\x3e\n          </div>\n          <div class="mt-4">\n            <a href="/admin/posts" data-navigo class="text-accent-600 hover:text-accent-700 text-sm font-medium">\n              查看所有文章 →\n            </a>\n          </div>\n        </div>\n        \n        \x3c!-- 快速操作 --\x3e\n        <div class="card">\n          <h2 class="text-xl font-semibold text-modern-900 mb-4">快速操作</h2>\n          <div class="space-y-3">\n            <a href="/admin/posts/create" data-navigo class="block p-4 border-2 border-modern-200 rounded-lg hover:border-accent-500 hover:bg-accent-50 transition-all">\n              <div class="flex items-center gap-3">\n                <span class="text-2xl">✏️</span>\n                <div>\n                  <h3 class="font-medium text-modern-900">新增文章</h3>\n                  <p class="text-sm text-modern-600">建立新的公告或文章</p>\n                </div>\n              </div>\n            </a>\n            \n            <a href="/admin/posts" data-navigo class="block p-4 border-2 border-modern-200 rounded-lg hover:border-accent-500 hover:bg-accent-50 transition-all">\n              <div class="flex items-center gap-3">\n                <span class="text-2xl">📋</span>\n                <div>\n                  <h3 class="font-medium text-modern-900">管理文章</h3>\n                  <p class="text-sm text-modern-600">編輯或刪除現有文章</p>\n                </div>\n              </div>\n            </a>\n            \n            ${e.isAdmin()?'\n              <a href="/admin/users" data-navigo class="block p-4 border-2 border-modern-200 rounded-lg hover:border-accent-500 hover:bg-accent-50 transition-all">\n                <div class="flex items-center gap-3">\n                  <span class="text-2xl">👥</span>\n                  <div>\n                    <h3 class="font-medium text-modern-900">使用者管理</h3>\n                    <p class="text-sm text-modern-600">管理系統使用者</p>\n                  </div>\n                </div>\n              </a>\n            ':""}\n          </div>\n        </div>\n      </div>\n    </div>\n  `;document.getElementById("app").innerHTML=t(d),n(),s.updatePageLinks(),await async function(){var t;try{const n=await a.list({page:1,per_page:100}),e=n.data||[],d=(null==(t=n.pagination)?void 0:t.total)||0,r=e.filter(t=>"published"===t.status).length,c=e.filter(t=>"draft"===t.status).length,i=e.reduce((t,n)=>t+(parseInt(n.views)||0),0),l=document.getElementById("stats-cards");l&&(l.innerHTML=`\n        <div class="card">\n          <div class="flex items-center justify-between mb-4">\n            <h3 class="text-sm font-medium text-modern-600">總文章數</h3>\n            <span class="text-2xl">📝</span>\n          </div>\n          <p class="text-3xl font-bold text-modern-900">${d}</p>\n          <p class="text-sm text-modern-500 mt-2">已發布 ${r} 篇</p>\n        </div>\n        \n        <div class="card">\n          <div class="flex items-center justify-between mb-4">\n            <h3 class="text-sm font-medium text-modern-600">總瀏覽量</h3>\n            <span class="text-2xl">👁️</span>\n          </div>\n          <p class="text-3xl font-bold text-modern-900">${i.toLocaleString()}</p>\n          <p class="text-sm text-modern-500 mt-2">全部文章累計</p>\n        </div>\n        \n        <div class="card">\n          <div class="flex items-center justify-between mb-4">\n            <h3 class="text-sm font-medium text-modern-600">草稿數</h3>\n            <span class="text-2xl">✏️</span>\n          </div>\n          <p class="text-3xl font-bold text-modern-900">${c}</p>\n          <p class="text-sm text-modern-600 mt-2">待發布</p>\n        </div>\n        \n        <div class="card">\n          <div class="flex items-center justify-between mb-4">\n            <h3 class="text-sm font-medium text-modern-600">已發布</h3>\n            <span class="text-2xl">✅</span>\n          </div>\n          <p class="text-3xl font-bold text-modern-900">${r}</p>\n          <p class="text-sm text-modern-500 mt-2">線上中的文章</p>\n        </div>\n      `);const o=e.sort((t,n)=>new Date(n.created_at)-new Date(t.created_at)).slice(0,5),m=document.getElementById("recent-posts");m&&(0===o.length?m.innerHTML='\n          <div class="text-center py-8 text-modern-500">\n            <p>尚無文章</p>\n            <a href="/admin/posts/create" data-navigo class="text-accent-600 hover:text-accent-700 mt-2 inline-block">\n              立即新增第一篇文章\n            </a>\n          </div>\n        ':m.innerHTML=o.map((t,n)=>{const e=new Date(t.created_at).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"});return`\n            <div class="flex items-center justify-between py-3 ${n<o.length-1?"border-b border-modern-100":""}">\n              <div class="flex-1 min-w-0">\n                <h3 class="font-medium text-modern-900 truncate">${t.title}</h3>\n                <div class="flex items-center gap-2 mt-1">\n                  <p class="text-sm text-modern-500">${e}</p>\n                  ${t.author?`<span class="text-sm text-modern-400">·</span><p class="text-sm text-modern-500">${t.author}</p>`:""}\n                </div>\n              </div>\n              <span class="ml-4 px-3 py-1 ${"published"===t.status?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"} text-sm rounded-full whitespace-nowrap">\n                ${"published"===t.status?"已發布":"草稿"}\n              </span>\n            </div>\n          `}).join(""),s.updatePageLinks())}catch(n){const t=document.getElementById("stats-cards");t&&(t.innerHTML='\n        <div class="col-span-4 card">\n          <p class="text-red-600">載入統計資料失敗，請重新整理頁面</p>\n        </div>\n      ')}}()}export{d as renderDashboard};
